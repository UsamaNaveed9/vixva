{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2023-02-21 00:32:06.160885",
 "custom_format": 0,
 "disabled": 0,
 "doc_type": "POS Closing Shift",
 "docstatus": 0,
 "doctype": "Print Format",
 "font": "Default",
 "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<div class=\\\"print-heading\\\">\\t\\t\\t\\t<h2><div>POS Closing Shift</div><br><small class=\\\"sub-heading\\\">{{ doc.name }}</small>\\t\\t\\t\\t</h2></div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"period_start_date\", \"print_hide\": 0, \"label\": \"Period Start Date\"}, {\"fieldname\": \"period_end_date\", \"print_hide\": 0, \"label\": \"Period End Date\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"posting_date\", \"print_hide\": 0, \"label\": \"Posting Date\"}, {\"fieldname\": \"pos_opening_shift\", \"print_hide\": 0, \"label\": \"POS Opening Shift\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"company\", \"print_hide\": 0, \"label\": \"Company\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"pos_profile\", \"print_hide\": 0, \"label\": \"POS Profile\"}, {\"fieldname\": \"user\", \"print_hide\": 0, \"label\": \"Cashier\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Modes of Payment\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"payment_reconciliation\", \"print_hide\": 0, \"label\": \"Payment Reconciliation\", \"visible_columns\": [{\"fieldname\": \"mode_of_payment\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"opening_amount\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"closing_amount\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"expected_amount\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"difference\", \"print_width\": \"\", \"print_hide\": 0}]}, {\"fieldtype\": \"Section Break\", \"label\": \"Details\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"net_total\", \"print_hide\": 0, \"label\": \"Net Total\"}, {\"fieldname\": \"total_quantity\", \"print_hide\": 0, \"label\": \"Total Quantity\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"taxes\", \"print_hide\": 0, \"label\": \"Taxes\", \"visible_columns\": [{\"fieldname\": \"account_head\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"rate\", \"print_width\": \"\", \"print_hide\": 0}, {\"fieldname\": \"amount\", \"print_width\": \"\", \"print_hide\": 0}]}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<div style=\\\"color: black;\\\">\\n    <h4 style=\\\"font-weight: 500; font-size: 16px; margin-top: 0px;\\\"><b>Credit Sales Invoices Summary</b></h4>\\n</div>\\n<table class=\\\"table table-bordered table-condensed\\\" >\\n    <thead>\\n        <tr>\\n            <th class=\\\"text-left\\\" width=\\\"5%\\\" style=\\\"background-color: #fff !important;\\\">Sr</th>\\n            <th class=\\\"text-left\\\" width=\\\"25%\\\" style=\\\"background-color: #fff !important;\\\">Sales Invoice</th>\\n            <th class=\\\"text-left\\\" width=\\\"20%\\\" style=\\\"background-color: #fff !important;\\\">Date</th>\\n            <th class=\\\"text-left\\\" width=\\\"25%\\\" style=\\\"background-color: #fff !important;\\\">Customer</th>\\n            <th class=\\\"text-right\\\" width=\\\"25%\\\" style=\\\"background-color: #fff !important;\\\">Amount</th>\\n        </tr>\\n    </thead>\\n    <tbody>\\n    {%- for item in doc.pos_transactions -%}\\n    {% set status= frappe.db.get_value(\\\"Sales Invoice\\\", {\\\"name\\\": item.sales_invoice},[\\\"status\\\"]) %}\\n    {% if status == \\\"Unpaid\\\" %}\\n    <tr>\\n        <td class=\\\"text-left\\\">{{ item.idx }}</td>\\n        <td class=\\\"text-left\\\">{{ item.sales_invoice}}</td>\\n        <td class=\\\"text-left\\\">{{ item.get_formatted(\\\"posting_date\\\")}}</td>\\n        <td class=\\\"text-left\\\">{{ item.customer }}</td>\\n        <td class=\\\"text-right\\\">{{ item.get_formatted(\\\"grand_total\\\") }}</td>\\n    </tr>\\n    {% endif %}\\n    {%- endfor -%}\\n    </tbody>\\n</table>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"grand_total\", \"print_hide\": 0, \"label\": \"Grand Total\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<!--<div>-->\\n<!--    <div class=\\\"col-xs-6 text-left\\\">-->\\n<!--        <label>Credit Sales</label>-->\\n<!--    </div>-->\\n<!--    <div class=\\\"col-xs-6 text-right value\\\">-->\\n<!--    {% set ad = namespace(amt=0) %}-->\\n<!--    {% for row in doc.payment_reconciliation %}-->\\n<!--        {% set ad.amt = ad.amt + row.closing_amount %}-->\\n<!--    {% endfor %}-->\\n<!--    {% set credit_sales = doc.grand_total - ad.amt %}-->\\n<!--    {{'%0.2f' % credit_sales|float}}-->\\n<!--    </div>-->\\n<!--</div>-->\\n{% set sales_in = frappe.db.get_list('Sales Invoice',\\n    filters={\\n        'pos_profile': doc.pos_profile,\\n        'posa_pos_opening_shift': doc.pos_opening_shift,\\n        'posting_date': doc.posting_date\\n    },\\n    fields=['name'],\\n    as_list=True\\n) %}\\n{% set total_s = namespace(sales=0) %}\\n{% set total_c = namespace(sl=0) %}\\n{% set total_cr = namespace(se=0) %}\\n{% for row in sales_in %}\\n{% set total_s.sales = total_s.sales + frappe.db.get_value('Sales Invoice', row[0], 'grand_total') %}\\n{% set cash_a = frappe.db.get_value('Sales Invoice Payment', {'parent': row[0], 'type': 'Cash'}, ['amount']) %}\\n{% if cash_a%}\\n    {% set total_c.sl = total_c.sl + cash_a %}\\n{% endif %}\\n{% set credit_a = frappe.db.get_value('Sales Invoice Payment', {'parent': row[0], 'type': 'Bank'}, ['amount']) %}\\n{% if credit_a %}\\n    {% set total_cr.se = total_cr.se + credit_a %}\\n{% endif %}\\n\\n{% endfor %}\\n\\n\\n<br><br>\\n<div class=\\\"totals\\\">\\n    <div class=\\\"col-xs-6\\\">\\n        <label>Total Sales:</label>\\n    </div>\\n    <div class=\\\"col-xs-6\\\">\\n        <p><b>{{total_s.sales }}</b></p>\\n    </div>\\n    \\n</div>\\n<div class=\\\"totals\\\">\\n    <div class=\\\"col-xs-6\\\">\\n        <label>Cash Sales:</label>\\n    </div>\\n    <div class=\\\"col-xs-6\\\">\\n        <p><b>{{total_c.sl}}</b></p>\\n    </div>\\n    \\n</div>\\n<div class=\\\"totals\\\">\\n    <div class=\\\"col-xs-6\\\">\\n        <label>Credit Card Sales:</label>\\n    </div>\\n    <div class=\\\"col-xs-6\\\">\\n        <p><b>{{total_cr.se}}</b></p>\\n    </div>\\n    \\n</div>\\n<div class=\\\"totals\\\">\\n    <div class=\\\"col-xs-6\\\">\\n        <label>Credit Sales:</label>\\n    </div>\\n    <div class=\\\"col-xs-6\\\">\\n        <p><b>{{total_s.sales - (total_c.sl + total_cr.se) }}</b></p>\\n    </div>\\n    \\n</div>\"}]",
 "idx": 0,
 "line_breaks": 0,
 "modified": "2023-02-21 00:36:40.373576",
 "modified_by": "Administrator",
 "module": "Vixva",
 "name": "Closing Sales Summary",
 "owner": "Administrator",
 "print_format_builder": 1,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}